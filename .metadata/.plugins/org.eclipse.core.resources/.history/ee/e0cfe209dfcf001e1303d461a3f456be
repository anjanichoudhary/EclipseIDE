import java.io.File;
import java.io.IOException;
import java.sql.Date;
import java.text.SimpleDateFormat;
import java.time.LocalDateTime;
import java.time.format.DateTimeFormatter;
import java.util.Locale;

import org.apache.commons.io.FileUtils;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.chrome.ChromeDriver;

public class BSE {

	public static void main(String[] args) {
		// TODO Auto-generated method stub

		// System.setProperty("webdriver.chrome.driver", "D:\\\\chromedriver-116\\\\chromedriver-win32\\\\chromedriver.exe");
		   WebDriver driver=new ChromeDriver();
		   driver.get("https://www.bseindia.com/corporates/List_Scrips.html");
		   driver.manage().window().maximize();
		// driver.manage().timeouts().implicitlyWait(5000, Duration.seconds);
		   driver.findElement(By.cssSelector("select#ddlsegment.form-control option[text=\"Equity\"]")).click();
		   driver.findElement(By.cssSelector("select#ddlstatus.form-control option[text=\"Active\"]")).click();
		   driver.findElement(By.cssSelector("#btnSubmit")).click();
		   driver.findElement(By.cssSelector("#lnkDownload")).click();
		   System.out.println(driver.getTitle());

		   String filename = LocalDateTime.now().format(DateTimeFormatter.ofPattern("yyyy-MM-dd-HH-mm-ss")) + ".txt";
			/*
			 * File source = new File("C:\\Users\\anjani\\Downloads\\Equity.csv");
			 * SimpleDateFormat sdf = new SimpleDateFormat("MM-dd-yyyy HH-mm-ss"); String ts
			 * = sdf.format(source.lastModified()); String name = source.getName(); String
			 * ext = name.substring(name.lastIndexOf(".")); name = name.substring(0,
			 * name.lastIndexOf(".")); String outFileName = name + " " + ts + ext;
			 * //appending ts to the file name System.out.println(" new file name is " +
			 * outFileName);
			 * 
			 * File destination = new File("C:\\Users\\anjani\\Downloads", outFileName);
			 */
			 
	}
	
	public static String getFileWithDate(String fileName, String fileSaperator, String dateFormat) {
	    String FileNamePrefix = fileName.substring(0, fileName.lastIndexOf(fileSaperator));
	    String FileNameSuffix = fileName.substring(fileName.lastIndexOf(fileSaperator)+1, fileName.length());
	    //System.out.println("File= Prefix~Suffix:"+FileNamePrefix +"~"+FileNameSuffix);
	    
	    String newFileName = new SimpleDateFormat("'"+FileNamePrefix+"_'"+dateFormat+"'"+fileSaperator+FileNameSuffix+"'").format(new Date(0));
	    System.out.println("New File:"+newFileName);
	    return newFileName;
	}
}
